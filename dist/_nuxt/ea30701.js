(window.webpackJsonp=window.webpackJsonp||[]).push([[17,2,6],{249:function(t,e,r){"use strict";r.r(e);var n={},o=r(15),component=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("client-only",[e("div")])}),[],!1,null,null,null);e.default=component.exports},250:function(t,e,r){"use strict";r.r(e);r(36),r(67),r(68),r(35),r(41),r(13),r(42),r(29),r(28),r(43),r(44),r(30);function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,v=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){v=!0,l=t},f:function(){try{c||null==r.return||r.return()}finally{if(v)throw l}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var l={components:{Search:r(249).default},props:{customers:{type:Array,default:[],required:!0}},data:function(){return{search_text:"",filterData:this.$props.customers,village:""}},created:function(){},methods:{search:function(){var t=this;this.filterData=this.filterData.filter((function(data){return data.name.toLowerCase().includes(t.search_text.toLowerCase())}))},filterByVillage:function(){if(this.filterData=[],this.$props.customers){var t,e=n(this.$props.customers);try{for(e.s();!(t=e.n()).done;){var data=t.value;"all"==this.village.toLowerCase()&&(this.filterData=this.$props.customers),this.village.toLowerCase()==data.village.toLowerCase()&&this.filterData.push(data)}}catch(t){e.e(t)}finally{e.f()}}}}},c=r(15),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("client-only",[r("div",{staticClass:"py-5"},[r("Search"),t._v(" "),r("div",{staticClass:"input-group mb-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.village,expression:"village"}],staticClass:"form-select",attrs:{id:"village","aria-label":"Default select example"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.village=e.target.multiple?r:r[0]},t.filterByVillage]}},[r("option",{attrs:{value:"Andhorail"}},[t._v("Andhorail")]),t._v(" "),r("option",{attrs:{value:"Dorbeshpur"}},[t._v("Dorbeshpur")]),t._v(" "),r("option",{attrs:{value:"dulahar"}},[t._v("dulahar")]),t._v(" "),r("option",{attrs:{value:"Nasirabad"}},[t._v("Nasirabad")]),t._v(" "),r("option",{attrs:{value:"Murshida"}},[t._v("Murshida")]),t._v(" "),r("option",{attrs:{value:"Mirzapur"}},[t._v("Mirzapur")]),t._v(" "),r("option",{attrs:{value:"Mirapara"}},[t._v("Mirapara")]),t._v(" "),r("option",{attrs:{value:"Amjoan"}},[t._v("Amjoan")]),t._v(" "),r("option",{attrs:{value:"Pirpur"}},[t._v("Pirpur")]),t._v(" "),r("option",{attrs:{value:"Lokkhonpur"}},[t._v("Lokkhonpur")]),t._v(" "),r("option",{attrs:{value:"Nachole"}},[t._v("Nachole")]),t._v(" "),r("option",{attrs:{value:"Muradpur"}},[t._v("Muradpur")]),t._v(" "),r("option",{attrs:{value:"Maktapur"}},[t._v("Maktapur")]),t._v(" "),r("option",{attrs:{value:"Konnanogor"}},[t._v("Konnanogor")]),t._v(" "),r("option",{attrs:{value:"Surjopur"}},[t._v("Surjopur")]),t._v(" "),r("option",{attrs:{value:"Verendi"}},[t._v("Verendi")]),t._v(" "),r("option",{attrs:{value:"Rahoigram"}},[t._v("Rahoigram")]),t._v(" "),r("option",{attrs:{value:"Sonabor"}},[t._v("Sonabor")]),t._v(" "),r("option",{attrs:{value:"Surjopur"}},[t._v("Surjopur")]),t._v(" "),r("option",{attrs:{value:"Muradpur"}},[t._v("Muradpur")]),t._v(" "),r("option",{attrs:{value:"others"}},[t._v("others")])]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.search_text,expression:"search_text"}],staticClass:"form-control p-2",attrs:{type:"search","aria-label":"Text input with dropdown button"},domProps:{value:t.search_text},on:{keyup:t.search,input:function(e){e.target.composing||(t.search_text=e.target.value)}}}),t._v(" "),r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"inputGroupFileAddon04"}},[t._v("Search")])]),t._v(" "),t.filterData.length>0?r("div",{staticClass:"list-group"},t._l(t.filterData,(function(e){return r("div",{key:e.id,staticClass:"list-group-item row"},[r("div",{staticClass:"col"},[r("nuxt-link",{staticClass:"name",attrs:{to:"/customer/persons?name="+e._id}},[t._v(t._s(e.name))])],1),t._v(" "),r("div",{staticClass:"col"},[r("h5",[t._v(t._s(e.village))])]),t._v(" "),r("div",{staticClass:"col"},[r("h5",{staticClass:"number"},[t._v(t._s(e.total_due)+"tk")])]),t._v(" "),r("div",{staticClass:"col"},[r("h5",{staticClass:"number"},[t._v(t._s(e.phone_number))])]),t._v(" "),r("div",{staticClass:"col"},[r("nuxt-link",{staticClass:"number",attrs:{to:"/order/persons?name="+e.id}},[t._v("Order")])],1),t._v(" "),r("div",{staticClass:"col"},[r("nuxt-link",{staticClass:"number",attrs:{to:"/payment/persons?name="+e.id}},[t._v("Payment")])],1)])})),0):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Search:r(249).default})},283:function(t,e,r){"use strict";r.r(e);r(67),r(41),r(13),r(35),r(42),r(29),r(28),r(43),r(44),r(30),r(250);var n=r(52);function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,v=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){v=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(v)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var c={name:"TotalDue",data:function(){return{total_due:0,new_due:0,prev_due:0,transitions:[],paymentByDate:[],total_payment:"",payoutHistory:[]}},created:function(){this.getAllCustomersTotalDue(),this.getAllCustomersTransition()},methods:{getAllCustomersTotalDue:function(){var t=this,e=Object(n.a)("customers?_limit=-1"),r="Bearer "+localStorage.getItem("token");this.$axios.get(e,{headers:{Authorization:r}}).then((function(e){if(200==e.status){var r,n=0,l=0,c=0,v=o(e.data);try{for(v.s();!(r=v.n()).done;){var d=r.value;n+=parseInt(d.total_due),d.new?l+=parseInt(d.total_due):c+=parseInt(d.total_due)}}catch(t){v.e(t)}finally{v.f()}t.total_due=n,t.new_due=l,t.prev_due=c,console.log(t.total_due)}})).catch((function(t){return console.log(t)}))},getAllCustomersTransition:function(){var t=this,e=Object(n.a)("transitions/"),r="Bearer "+localStorage.getItem("token");this.$axios.get(e,{headers:{Authorization:r}}).then((function(e){if(200==e.status){t.transitions=e.data;var r,n=0,l=[],c=o(t.transitions);try{for(c.s();!(r=c.n()).done;){var v=r.value;l.includes(v.time)||l.push(v.time),n+=parseInt(v.payment)}}catch(t){c.e(t)}finally{c.f()}t.paymentByDate=l,t.getDateTransition(),t.total_payment=n}})).catch((function(t){return console.log(t)}))},getDateTransition:function(){var t,e=[],r=o(this.paymentByDate);try{for(r.s();!(t=r.n()).done;){var n,data=t.value,l=0,c=o(this.transitions);try{for(c.s();!(n=c.n()).done;){var v=n.value;v.time==data&&(l+=parseInt(v.payment))}}catch(t){c.e(t)}finally{c.f()}e.push({paymet:l,time:data})}}catch(t){r.e(t)}finally{r.f()}this.payoutHistory=e}}},v=r(15),component=Object(v.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("client-only",[r("div",{staticClass:"container"},[r("div",{staticClass:"row my-4"},[r("div",{staticClass:"col-md-4 mb-3"},[r("div",{staticClass:"customer-details"},[r("div",{staticClass:"totalPayout"},[r("h4",{staticClass:"m-0 text-center"},[t._v("Previous Due: "+t._s(t.prev_due)+"TK")])])])]),t._v(" "),r("div",{staticClass:"col-md-4 mb-3"},[r("div",{staticClass:"customer-details"},[r("div",{staticClass:"totalPayout"},[r("h4",{staticClass:"m-0 text-center"},[t._v("New Due: "+t._s(t.new_due)+"TK")])])])]),t._v(" "),r("div",{staticClass:"col-md-4 mb-3"},[r("div",{staticClass:"customer-details"},[r("div",{staticClass:"totalPayout"},[r("h4",{staticClass:"m-0 text-center"},[t._v("Total Due: "+t._s(t.total_due)+"TK")])])])]),t._v(" "),r("div",{staticClass:"col-md-4 mb-3"},[r("div",{staticClass:"customer-details"},[r("div",{staticClass:"totalPayout"},[r("h4",{staticClass:"m-0 text-center"},[t._v("Total Payment: "+t._s(t.total_payment)+"TK")])])])])]),t._v(" "),r("div",{staticClass:"transitions"},[t.payoutHistory&&t.payoutHistory.length?r("div",{staticClass:"row"},t._l(t.payoutHistory.reverse(),(function(tr){return r("div",{key:tr.id,staticClass:"list-group col-12 d-flex"},[r("h5",{staticClass:"number"},[t._v(t._s(tr.time)+"tk")]),t._v(" "),r("h5",{staticClass:"number"},[t._v(t._s(tr.paymet))])])})),0):t._e()])])])}),[],!1,null,null,null);e.default=component.exports}}]);