(window.webpackJsonp=window.webpackJsonp||[]).push([[16,5],{251:function(t,e,r){var o=r(5),n=r(181).values;o({target:"Object",stat:!0},{values:function(t){return n(t)}})},252:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var o=r(97);var n=r(127),c=r(70);function l(t){return function(t){if(Array.isArray(t))return Object(o.a)(t)}(t)||Object(n.a)(t)||Object(c.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},254:function(t,e,r){"use strict";r.r(e);var o,n=r(23),c=r(252),l=(r(35),r(251),r(69),r(36),r(41),r(13),r(42),r(29),r(28),r(43),r(44),r(30),r(37),r(53),r(31),r(54),r(52));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function m(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,c=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,n=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw n}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var _=(o={props:{products:{type:Array,default:[],required:!0},userId:{type:String,default:"",required:!0}},data:function(){return{productId:"",qty:1,unit_price:"",selectedProduct:{id:"",name:"",price:"",qty:"",unite_price:""},cartTotal:0,cartQty:0,addedProducts:[]}},created:{getQuery:function(){}},computed:{calculteSelectedprice:function(){return parseInt(this.qty)*parseInt(this.selectedProduct.price)},calculteAddedPrice:function(){for(var t=0,i=0;i<this.addedProducts.length;i++){var e=this.addedProducts[i].total_price;t=parseInt(t)+parseInt(e)}return t},calculteAddedQty:function(){for(var t=0,i=0;i<this.addedProducts.length;i++){this.addedProducts[i].total_price;var e=this.addedProducts[i].qty;t=parseInt(t)+parseInt(e)}return t}}},Object(n.a)(o,"created",(function(){})),Object(n.a)(o,"methods",{selectProduct:function(t){var e=this,r=Object(l.a)("product/".concat(t)),o="Bearer "+localStorage.getItem("token");this.$axios.get(r,{headers:{Authorization:o}}).then((function(t){200==t.status&&(e.selectedProduct.name=t.data.name,e.selectedProduct.price=t.data.price)})).catch((function(t){return console.log(t)}))},addselectedProduct:function(){var t={_id:this.productId,name:this.selectedProduct.name,unite_price:this.selectedProduct.price,qty:parseInt(this.qty),total_price:this.calculteSelectedprice};if(Object.values(t).some((function(t){return null==t||""==t})))return alert("Fill all field"),!1;this.addedProducts=[].concat(Object(c.a)(this.addedProducts),[t]);for(var e=0,r=0,i=0;i<this.addedProducts.length;i++){var o=this.addedProducts[i].total_price,n=this.addedProducts[i].qty;e=parseInt(e)+parseInt(o),r=parseInt(r)+parseInt(n)}this.cartTotal=e,this.cartQty=r,this.qty=1,this.selectedProduct={name:"",price:"",qty:"",unite_price:""}},removeFromCart:function(t){this.addedProducts=this.addedProducts.filter((function(e){return e._id!=t}))},createOrder:function(){var t,e=this,r={},o=m(this.addedProducts);try{for(o.s();!(t=o.n()).done;){var n=t.value;r[n._id]=v({},n)}}catch(t){o.e(t)}finally{o.f()}console.log(r);var data={products:r,type:"order",customer:this.$route.query.id};console.log(data);var c=Object(l.a)("customer/order"),d=Object(l.c)("Bearer");this.$axios.post(c,data,{headers:{Authorization:d}}).then((function(t){console.log(t),200==t.status&&e.$toast.open({position:"top",message:"Successfully order create",type:"success"})})).catch((function(t){e.$toast.open({position:"top",message:"Order creation faield",type:"warning"})}))}}),o),h=r(15),component=Object(h.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("client-only",[r("div",[r("form",{staticClass:"w-100"},[r("div",{staticClass:"form-row row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"inputState"}},[t._v("Products")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.productId,expression:"productId"}],staticClass:"form-control",attrs:{id:"inputState"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.productId=e.target.multiple?r:r[0]},function(e){return t.selectProduct(t.productId)}]}},[r("option",{attrs:{selected:""}},[t._v("Products")]),t._v(" "),t._l(t.products,(function(e){return r("option",{key:e.id,domProps:{value:e._id}},[t._v(t._s(e.name))])}))],2)]),t._v(" "),r("div",{staticClass:"form-group col-md-2"},[r("label",{attrs:{for:"qty"}},[t._v("Unit Price")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedProduct.price,expression:"selectedProduct.price"}],staticClass:"form-control",attrs:{disabled:"",type:"number",id:"qty"},domProps:{value:t.selectedProduct.price},on:{input:function(e){e.target.composing||t.$set(t.selectedProduct,"price",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group col-md-2"},[r("label",{attrs:{for:"qty"}},[t._v("Quentity")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],staticClass:"form-control",attrs:{type:"number",id:"qty"},domProps:{value:t.qty},on:{input:function(e){e.target.composing||(t.qty=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group col-md-2"},[r("label",{attrs:{for:"total"}},[t._v("Total Price")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.calculteSelectedprice,expression:"calculteSelectedprice"}],staticClass:"form-control",attrs:{disabled:"",type:"number",id:"total"},domProps:{value:t.calculteSelectedprice},on:{input:function(e){e.target.composing||(t.calculteSelectedprice=e.target.value)}}})])]),t._v(" "),r("button",{staticClass:"btn w-100 d-block btn-primary mt-3",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.addselectedProduct.apply(null,arguments)}}},[t._v("Add Products")])]),t._v(" "),t.addedProducts.length>0?r("div",{staticClass:"added-product mt-5"},[r("ul",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item d-flex justify-content-between mb-2"},[r("h6",[t._v("Name")]),t._v(" "),r("h6",[t._v("Unit Price")]),t._v(" "),r("h6",[t._v("Quentity")]),t._v(" "),r("h6",[t._v("Total Price")])]),t._v(" "),t._l(t.addedProducts,(function(e,o){return r("li",{key:o,staticClass:"list-group-item d-flex justify-content-between "},[r("p",[t._v(t._s(e.name))]),t._v(" "),r("p",[t._v(t._s(e.unite_price))]),t._v(" "),r("p",[t._v(t._s(e.qty))]),t._v(" "),r("p",{staticClass:"number"},[r("span",[t._v(t._s(e.total_price))]),t._v(" "),r("span",{staticClass:"dlt text-red ml-4",on:{click:function(r){return r.preventDefault(),t.removeFromCart(e._id)}}},[t._v("X")])])])}))],2),t._v(" "),r("ul",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item mt-4"},[r("h6",[t._v("Total Item: "+t._s(t.calculteAddedQty))]),t._v(" "),r("h6",[t._v("Total Price: "+t._s(t.calculteAddedPrice))])])]),t._v(" "),r("button",{staticClass:"btn w-100 d-block btn-primary mt-3",on:{click:function(e){return e.preventDefault(),t.createOrder.apply(null,arguments)}}},[t._v("Place Order")])]):t._e()])])}),[],!1,null,null,null);e.default=component.exports},259:function(t,e,r){var content=r(270);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(96).default)("273a76b8",content,!0,{sourceMap:!1})},269:function(t,e,r){"use strict";r(259)},270:function(t,e,r){var o=r(95)(!1);o.push([t.i,".table-row{background-color:#f0f8ff;border-bottom:1.4px solid grey}.table-row td{border:none}",""]),t.exports=o},282:function(t,e,r){"use strict";r.r(e);var o=r(52),n={components:{Order:r(254).default},data:function(){return{ordererUser:null,products:[],userId:this.$route.query.id,customers:[]}},created:function(){this.selectCustomer(),this.getProducts(),this.getAllCustomer()},cumputed:{},methods:{selectNewCustome:function(){this.ordererUser=null,this.$router.push("/order")},getAllCustomer:function(){var t=this,e=Object(o.a)("customer"),r=Object(o.c)("Bearer");this.$axios.get(e,{headers:{Authorization:r}}).then((function(e){console.log(e),200==e.status&&(t.customers=e.data.customer)})).catch((function(t){return console.log(t)}))},selectCustomer:function(t){var e=this;if(t||this.$route.query.id){var r=t||this.$route.query.id,n=Object(o.a)("customer/".concat(r)),c=Object(o.c)("Bearer");this.$axios.get(n,{headers:{Authorization:c}}).then((function(t){e.$router.push("/order?id="+r),console.log(t),200==t.status&&(e.ordererUser=t.data.customer)})).catch((function(t){return console.log(t)}))}},getProducts:function(){var t=this,e=Object(o.a)("product/");localStorage.getItem("token");this.$axios.get(e).then((function(e){console.log(e),200==e.status&&(t.products=e.data)})).catch((function(t){return console.log(t)}))}}},c=(r(269),r(15)),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("client-only",[null!=t.ordererUser?r("div",{staticClass:"container py-5"},[r("a",{staticClass:"btn text-white mb-5 btn-primary pointer",on:{click:function(e){return e.preventDefault(),t.selectNewCustome.apply(null,arguments)}}},[t._v("Select New Customer")]),t._v(" "),r("form",{staticClass:"w-100 mb-5"},[r("div",{staticClass:"form-row row"},[r("div",{staticClass:"form-group col-md-5"},[r("label",{attrs:{for:"inputEmail4"}},[t._v("Name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.ordererUser.name,expression:"ordererUser.name"}],staticClass:"form-control",attrs:{disabled:"",type:"text"},domProps:{value:t.ordererUser.name},on:{input:function(e){e.target.composing||t.$set(t.ordererUser,"name",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group col-md-5"},[r("label",{attrs:{for:"inputEmail4"}},[t._v("Village")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.ordererUser.village,expression:"ordererUser.village"}],staticClass:"form-control",attrs:{disabled:"",type:"text"},domProps:{value:t.ordererUser.village},on:{input:function(e){e.target.composing||t.$set(t.ordererUser,"village",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group col-md-2"},[r("label",{attrs:{for:"inputEmail4"}},[t._v("Due")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.ordererUser.total_due,expression:"ordererUser.total_due"}],staticClass:"form-control",attrs:{disabled:"",type:"text"},domProps:{value:t.ordererUser.total_due},on:{input:function(e){e.target.composing||t.$set(t.ordererUser,"total_due",e.target.value)}}})])])]),t._v(" "),r("Order",{attrs:{userId:t.userId,products:t.products}})],1):r("div",{staticClass:"container py-5"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.customer,expression:"customer"}],staticClass:"form-control mb-5",attrs:{type:"text",name:"",id:""},domProps:{value:t.customer},on:{input:function(e){e.target.composing||(t.customer=e.target.value)}}}),t._v(" "),t.customers&&t.customers.length?r("table",{staticClass:"table table-bordered dt-responsive nowrap",staticStyle:{"border-collapse":"collapse","border-spacing":"0",width:"100%"},attrs:{id:"datatable"}},[r("thead",[r("tr",[r("th",[t._v("Name")]),t._v(" "),r("th",[t._v("Village")]),t._v(" "),r("th",[t._v("Phone Number")]),t._v(" "),r("th",[t._v("Father Name")]),t._v(" "),r("th",[t._v("Total Bill")])])]),t._v(" "),r("tbody",t._l(t.customers,(function(e){return r("tr",{key:e.id,staticClass:"table-row",on:{click:function(r){return r.preventDefault(),t.selectCustomer(e._id)}}},[r("td",[t._v(t._s(e.name))]),t._v(" "),r("td",[t._v(t._s(e.village))]),t._v(" "),r("td",[t._v(t._s(e.phone_number))]),t._v(" "),r("td",[t._v(t._s(e.father_name))]),t._v(" "),r("td",[t._v(t._s(e.total_due))]),t._v(" "),r("td",[r("a",{staticClass:"dlt mr-2 pointer text-red",on:{click:function(r){return r.preventDefault(),t.selectCustomer(e._id)}}},[t._v("Select")])])])})),0)]):t._e()])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Order:r(254).default})}}]);